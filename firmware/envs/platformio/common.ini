; ============================================================================
; Common PlatformIO settings for SecuraCV firmware
; ============================================================================

[platformio]
; Default environments to build when 'pio run' is called without -e
default_envs = canary-wap-default

[common]
; Common build settings shared across all environments
framework = arduino
monitor_speed = 115200
upload_speed = 921600

; Common build flags
build_flags =
    -std=gnu++17
    -DCORE_DEBUG_LEVEL=0
    -DARDUINO_USB_CDC_ON_BOOT=1
    -Wall
    -Wextra
    -Wno-unused-parameter

; Common library dependencies
lib_deps =
    bblanchon/ArduinoJson@^7.0.0

; Extra scripts for version embedding
extra_scripts =
    pre:scripts/version_info.py

[common_esp32s3]
; Settings specific to ESP32-S3 boards
extends = common
platform = espressif32
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L

build_flags =
    ${common.build_flags}
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue

[common_esp32c3]
; Settings specific to ESP32-C3 boards
extends = common
platform = espressif32
board_build.mcu = esp32c3
board_build.f_cpu = 160000000L

build_flags =
    ${common.build_flags}
